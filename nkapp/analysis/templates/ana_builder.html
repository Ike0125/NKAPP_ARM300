<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reports</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/base.css') }}"
    />
    <script src="/static/js/treeview.js"></script>
  </head>
  <body>
    <div class="sidebar">
      <ul>
        <br><br>
        <li><a href={{ url_for('analysis.analysis_query') }}>Analysis</a></li>
        <li><a href="{{ url_for('analysis.main') }}">Analysis Main</a></li>
        <li><a href="{{ url_for('rpt.main') }}">Reports</a></li>
        <li><a href="https://jpx-jquants.com/auth/signin">APIs</a></li>
        <li><a href={{ url_for('analysis.builder') }}>Parameters</a></li>
        <li><a href="http://localhost:8888/lab">Jupyter Lab</a></li>
        <br><br><br>
        <a href={{ url_for('analysis.builder') }}>Hot</a>
        <br><br>
        <a href="{{ url_for('nkapp.index') }}">Home</a>
        <br><br><br><br><br><br><br><br><br><br><br><br>
        <a href="https://jpx-jquants.com/auth/signin"
          target="_blank"
          rel="noopener noreferrer"
          >J-Quontes</a><br>
        <br>
        <a href="https://chatgpt.com/g/g-qSdKOpRki-webahuri-nksys-zuo-cheng"
        target="_blank" rel="noopener noreferrer"
          >ChatGPT</a><br>
        <br>
        <a href="https://www.perplexity.ai/"
          target="_blank"
          rel="noopener noreferrer"
          >Perplexity</a><br>
      </ul>
    </div>
    <div class="main-content">
      <header>
        <h1>Analysis</h1>
      </header>
      <body>
        <h2>Market Params Setting</h2>
        <p>Click on the arrow(s) to open or close the tree branches.</p>
        <br>
        <form action="/nkapp/analysis/reg_marketcode" method="POST">
          <div class="parent caret" onclick="toggleVisibility(this)">
            市場区分コード
          </div>
          <div class="child">
            <select name="dropdown10" id="dropdown10" required>
              <option value="">選択してください</option>
              {% for value, text in VALUE_MAP10.items() %}
                <option value="{{ value }}" {% if value == selected10 %}selected{% endif %}>{{ text }}</option>
              {% endfor %}
            </select>
            <input type="submit" value="登録">
          </div>
          <br>
        </form>
        <h2>Calculation Formula Setting</h2>
        <br>
        <form action="/nkapp/analysis/register_ma" method="POST">
          <div class="parent caret" onclick="toggleVisibility(this)">
            移動平均
          </div>
          <div class="child">
            <p>Default : ma01=5, ma02=20, ma03=50,</p>
            <p>ma04=100, ma05=200 [days]</p>
            <br>
            <label for="ma01"> 移動平均１:</label>
            <input type="number" style="width:50px; text-align: right;" id="ma01"
            name="ma_value01" value="{{ma_value01}}" min="1" max="400" step="1">
            <br>
            <label for="ma02"> 移動平均２:</label>
            <input type="number" style="width:50px; text-align: right;" id="ma02"
            name="ma_value02" value="{{ma_value02}}" min="1" max="400" step="1">
            <br>
            <label for="ma03"> 移動平均３:</label>
            <input type="number" style="width:50px; text-align: right;" id="ma03"
            name="ma_value03" value="{{ma_value03}}" min="1" max="400" step="1">
            <br>
            <label for="ma04"> 移動平均４:</label>
            <input type="number" style="width:50px; text-align: right;" id="ma04"
            name="ma_value04" value="{{ma_value04}}" min="1" max="400" step="1">
            <br>
            <label for="ma05"> 移動平均５:</label>
            <input type="number" style="width:50px; text-align: right;" id="ma05"
            name="ma_value05" value="{{ma_value05}}" min="1" max="400" step="1">
          <br>
          <br>
          <input type="submit" value="登録">
        </div>
      </form>
        <br>
      <form action="/nkapp/analysis/register_rsi" method="POST">
        <div class="parent caret" onclick="toggleVisibility(this)">
          RSI
        </div>
        <div class="child">
          <p>Default : 14days</p>
          <br>
          <label for="rsi_period"> RSI_Period:</label>
          <input type="number" style="width:50px; text-align: right;" id="rsi_period"
          name="rsi_period_value" value="{{rsi_period_value}}" min="1" max="50" step="1">
          <br><br>
          <input type="submit" value="登録">
        </div>
      </form>
      <br>
      <form action="/nkapp/analysis/register_macd" method="POST">
        <div class="parent caret" onclick="toggleVisibility(this)">
          MACD
        </div>
        <div class="child">
          <p>Default : Short-7days, Long-14days, signal-9days</p>
          <br>
          <label for="macd_short"> Short_Window  :</label>
          <input type="number" style="width:50px; text-align: right;" id="macd_short"
          name="macd_short_value" value="{{macd_short_value}}" min="1" max="50" step="1">
          <br>
          <label for="macd_long"> Long_Window   :</label>
          <input type="number" style="width:50px; text-align: right;" id="macd_long"
          name="macd_long_value" value="{{macd_long_value}}" min="1" max="50" step="1">
          <br>
          <label for="macd_signal"> Signal_Window:</label>
          <input type="number" style="width:50px; text-align: right;" id="macd_signal"
          name="macd_signal_value" value="{{macd_signal_value}}" min="1" max="50" step="1">
          <br><br>
          <input type="submit" value="登録">
        </div>
        <br>
      </form>
      </body>
    </div>
    <div class="card-container">
      <div class="card">
        <h2>Market Params</h2>
          <table style="width: 350px;">
            <tr>
              <td>市場区分：</td>
              <td>{{selected10}}</td>
            </tr>
            <tr>
          </table>
          <br>
        <h2>Formula Params</h2>
          <br>
          <h3>移動平均</h3>
            <p>Default : ma01-05: 5,20,50,100,200 days</p>
            <table style="width: 350px;">
              <tr>
                <td>移動平均１：</td>
                <td>{{ma_value01}}_days</td>
              </tr>
              <tr>
                <td>移動平均２：</td>
                <td>{{ma_value02}}_days</td>
              </tr>
              <tr>
                <td>移動平均３：</td>
                <td>{{ma_value03}}_days</td>
              </tr>
              <tr>
                <td>移動平均４：</td>
                <td>{{ma_value04}}_days</td>
              </tr>
              <tr>
                <td>移動平均５：</td>
                <td>{{ma_value05}}_days</td>
              </tr>
            </table>
            <br>
          <h3>RSI</h3>
            <p>Default : RSI:9 days</p>
            <table style="width: 250px;">
              <tr>
                <td>期間：</td>
                <td>{{rsi_period_value}}_days</td>
              </tr>
            </table>
            <br>
            <h3>MACD</h3>
            <p>Default : EMA1:7, EMA2:14, Signal:9 days</p>
            <table style="width: 280px;">
              <tr>
                <td>EMA_1:</td>
                <td>{{ macd_short_value }} days</td>
              </tr>
              <tr>
                <td>EMA_2:</td>
                <td>{{ macd_long_value }} days</td>
              </tr>
              <tr>
                <td>Signal:</td>
                <td>{{ macd_signal_value }} days</td>
              </tr>
            </table>
      </div>
    </div>
    <footer>
      <p>ana_builder</p>
      <p>© 2024 SWFSOMA013 All Rights Reserved.</p>
      <p>{{ current_time }}</p>
    </footer>
  </body>
</html>
